<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T9HC454Z');</script>
<!-- End Google Tag Manager -->
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=0.67, maximum-scale=1.0, user-scalable=yes">
<title>í•‘ê±°ëŸ° | ì••ë„ì ì¸ ë””ìì¸ê³¼ ì„±ëŠ¥ì˜ í•œê¸€íƒ€ìì—°ìŠµì„ ê²½í—˜í•´ë³´ì„¸ìš”.</title>
<link rel="icon" type="image/svg+xml" href="../images/finger-run-logo.svg">
<link rel="shortcut icon" type="image/svg+xml" href="../images/finger-run-logo.svg">
<link rel="apple-touch-icon" href="../images/finger-run-logo.svg">
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>âŒ¨ï¸</text></svg>">
    
    <!-- SEO ë©”íƒ€íƒœê·¸ -->
    <meta name="description" content="ì••ë„ì ì¸ ë””ìì¸ê³¼ ì„±ëŠ¥ì„ ê°–ì¶˜ íƒ€ìì—°ìŠµ ì‚¬ì´íŠ¸ë¡œ íƒ€ì´í•‘ ì†ë„ì™€ ì •í™•ë„ë¥¼ í–¥ìƒì‹œí‚¤ì„¸ìš”. ììŒ, ëª¨ìŒ, ë‹¨ì–´, ë¬¸ì¥ ë‹¨ê³„ë³„ í•œê¸€íƒ€ì ì—°ìŠµ í”„ë¡œê·¸ë¨.">
    <meta name="keywords" content="í•œê¸€íƒ€ìì—°ìŠµ, í•œê¸€ìíŒì—°ìŠµ, íƒ€ìì—°ìŠµ, í•œê¸€íƒ€ìì†ë„, í•œê¸€íƒ€ìì—°ìŠµ ì‚¬ì´íŠ¸, ì˜¨ë¼ì¸ íƒ€ìì—°ìŠµ, ììŒì—°ìŠµ, ëª¨ìŒì—°ìŠµ, ë‹¨ì–´ì—°ìŠµ, ë¬¸ì¥ì—°ìŠµ">
    <meta name="author" content="FingerRun">
    <meta name="robots" content="index, follow">

    <!-- Open Graph (SNS ê³µìœ ) -->
    <meta property="og:title" content="í•‘ê±°ëŸ° | í•œê¸€íƒ€ìì—°ìŠµ">
    <meta property="og:description" content="ì••ë„ì ì¸ ë””ìì¸ê³¼ ì„±ëŠ¥ì˜ íƒ€ìì—°ìŠµ ì‚¬ì´íŠ¸ë¡œ íƒ€ì´í•‘ ì†ë„ì™€ ì •í™•ë„ë¥¼ í–¥ìƒì‹œí‚¤ì„¸ìš”. ììŒ, ëª¨ìŒ, ë‹¨ì–´, ë¬¸ì¥ ë‹¨ê³„ë³„ í•™ìŠµ.">
    <meta property="og:url" content="https://fingerrun.com/Korean/practice.html">
    <meta property="og:type" content="website">

    <!-- ì¶”ê°€ SEO -->
    <link rel="canonical" href="https://fingerrun.com/Korean/practice.html">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        /* Navigation */
        nav {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: #667eea;
            text-decoration: none;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 1.5rem;
            flex-wrap: nowrap;
            white-space: nowrap;
        }

        .nav-menu li {
            position: relative;
        }

        .nav-menu a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            padding: 0.5rem 0.8rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .nav-menu a:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        /* ë“œë¡­ë‹¤ìš´ í™”ì‚´í‘œ */
        .dropdown-arrow {
            font-size: 0.7rem;
            transition: transform 0.3s ease;
        }

        /* ë“œë¡­ë‹¤ìš´ ë©”ë‰´ */
        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-radius: 10px;
            padding: 0.5rem 0;
            min-width: 180px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1001;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .nav-menu li:hover .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .nav-menu li:hover .dropdown-arrow {
            transform: rotate(180deg);
        }

        .dropdown-menu a {
            display: block;
            padding: 0.7rem 1rem;
            color: #333;
            border-radius: 0;
            font-weight: 400;
            transition: all 0.2s ease;
        }

        .dropdown-menu a:hover {
            background: #f8f9fa;
            color: #667eea;
            transform: none;
            padding-left: 1.2rem;
        }

        /* Main Container */
        .main-container {
            margin-top: 80px;
            padding: 2rem 0;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            padding-left: 2rem;
            padding-right: 2rem;
        }

        .page-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .page-description {
            font-size: 1.2rem;
            color: #666;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Practice Container */
        .practice-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            padding: 3rem;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
        }

        .practice-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
        }

        /* Menu Buttons */
        .practice-menu {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .menu-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            background: #f8f9fa;
            color: #667eea;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 2px solid transparent;
        }

        .menu-btn:hover {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .menu-btn.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        /* Practice Area */
        .practice-area {
            text-align: center;
            margin-bottom: 3rem;
        }

        .text-display {
            font-size: 1.8rem;
            line-height: 1.8;
            margin-bottom: 2rem;
            min-height: 120px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 2rem;
            word-break: keep-all;
            letter-spacing: 2px;
            border: 2px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .text-display:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }

        .text-display.sentence-mode {
            letter-spacing: 0.2px;
            line-height: 1.6;
            background: white;
            border: 2px solid #e2e8f0;
        }

        .text-display.sentence-mode:hover {
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }

        .text-display.sentence-mode .char {
            margin: 0;
            padding: 0;
            background: none !important;
            border-radius: 0;
            transition: color 0.2s ease;
            color: #8b5cf6;
            font-weight: 500;
            box-shadow: none !important;
            transform: none !important;
            animation: none !important;
        }

        .text-display.sentence-mode .char.correct {
            color: #000000;
        }

        .text-display.sentence-mode .char.incorrect {
            color: #ff4444;
        }

        .text-display.sentence-mode .char.current {
            color: #3b82f6;
            background: none !important;
        }

        /* ë„ì–´ì“°ê¸° ìŠ¤íƒ€ì¼ */
        .text-display.sentence-mode .char.space {
            display: inline-block;
            width: 0.5em;
        }

        .char {
            margin: 3px;
            padding: 8px 10px;
            border-radius: 8px;
            transition: all 0.3s ease;
            color: #666;
            font-weight: 500;
        }

        .char.correct {
            color: white;
            background: linear-gradient(45deg, #4caf50, #45a049);
            transform: scale(1.1);
            box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3);
        }

        .char.incorrect {
            color: white;
            background: linear-gradient(45deg, #ff6b6b, #ff5252);
            transform: scale(1.1);
            box-shadow: 0 4px 10px rgba(255, 107, 107, 0.3);
        }

        .char.current {
            color: white;
            background: linear-gradient(45deg, #667eea, #764ba2);
            animation: pulse 1.5s infinite;
            transform: scale(1.15);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1.15); }
            50% { opacity: 0.7; transform: scale(1.2); }
        }

        /* Keyboard Area */
        .keyboard-area {
            margin: 2rem 0;
            display: flex;
            justify-content: center;
        }

        .keyboard {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 2px solid #e2e8f0;
            width: 100%;
            max-width: none;
        }

        .keyboard-row {
            display: flex;
            justify-content: center;
            margin-bottom: 0.5rem;
            gap: 0.3rem;
        }

        .keyboard-row:last-child {
            margin-bottom: 0;
        }

        .key {
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 0.8rem;
            min-width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            font-size: 0.9rem;
            color: #495057;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .key:hover {
            background: linear-gradient(145deg, #e9ecef, #dee2e6);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .key.active {
            background: linear-gradient(145deg, #ff6b6b, #ff5252) !important;
            color: white !important;
            border-color: #ff4444 !important;
            transform: scale(1.1) !important;
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4) !important;
            animation: keyPulse 0.3s ease-in-out !important;
        }

        @keyframes keyPulse {
            0% { transform: scale(1.1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1.1); }
        }

        /* íŠ¹ìˆ˜ í‚¤ ìŠ¤íƒ€ì¼ */
        .key.wide { min-width: 4rem; }
        .key.extra-wide { min-width: 6rem; }
        .key.space { min-width: 12rem; }
        .key.shift { min-width: 5rem; }
        .key.tab { min-width: 3.5rem; }
        .key.caps { min-width: 4.5rem; }
        .key.enter { min-width: 5.5rem; }
        .key.backspace { min-width: 4.5rem; }

        /* í•œê¸€/ì˜ì–´ í‘œì‹œ */
        .key-dual {
            display: flex;
            flex-direction: column;
            align-items: center;
            line-height: 1.1;
        }

        .key-en {
            font-size: 0.7rem;
            color: #6c757d;
        }

        .key-ko {
            font-size: 0.8rem;
            color: #495057;
            font-weight: 600;
        }

        /* Input Area */
        .input-area {
            margin-bottom: 3rem;
        }

        .typing-input {
            width: 100%;
            padding: 18px;
            font-size: 1.2rem;
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            text-align: center;
            outline: none;
            background: white;
            color: #333;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .typing-input:focus {
            border-color: #667eea;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
        }

        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            background: #f8f9fa;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            border: 2px solid #e2e8f0;
        }

        .stat-item {
            text-align: center;
            padding: 1.5rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.1);
        }

        .stat-value {
            font-size: 2.2rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: #666;
            font-size: 1rem;
            font-weight: 500;
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: white;
            padding: 3rem;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 90%;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .complete-title {
            font-size: 2.8rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 2rem;
        }

        .complete-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 3rem;
        }

        .complete-stat {
            text-align: center;
            padding: 1.5rem;
            background: #f8f9fa;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .complete-value {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .complete-label {
            color: #666;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .restart-btn {
            padding: 15px 40px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .restart-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-menu {
                gap: 1rem;
                flex-wrap: nowrap;
            }

            .nav-menu a {
                padding: 0.4rem 0.6rem;
                font-size: 0.8rem;
            }

            .dropdown-menu {
                min-width: 150px;
                font-size: 0.8rem;
            }

            .dropdown-menu a {
                padding: 0.5rem 0.8rem;
            }

            .practice-container {
                padding: 2rem;
                margin: 1rem;
            }

            .page-title {
                font-size: 2rem;
            }

            .text-display {
                font-size: 1.5rem;
                padding: 1.5rem;
            }

            .stats {
                grid-template-columns: 1fr;
                gap: 15px;
                padding: 1.5rem;
            }

            .practice-menu {
                gap: 10px;
            }

            .menu-btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }

            .modal-content {
                padding: 2rem;
                margin: 1rem;
            }

            .complete-title {
                font-size: 2.2rem;
            }

            .complete-value {
                font-size: 2rem;
            }

            /* ëª¨ë°”ì¼ í‚¤ë³´ë“œ ì¡°ì • */
            .keyboard {
                padding: 1rem;
            }

            .key {
                min-width: 1.8rem;
                height: 1.8rem;
                padding: 0.4rem;
                font-size: 0.7rem;
            }

            .key-dual {
                line-height: 1;
            }

            .key-en {
                font-size: 0.5rem;
            }

            .key-ko {
                font-size: 0.6rem;
            }

            .key.space {
                min-width: 6rem;
            }

            .key.shift {
                min-width: 2.5rem;
            }

            .key.enter {
                min-width: 3rem;
            }

            .key.backspace {
                min-width: 2.5rem;
            }

            .key.wide {
                min-width: 2rem;
            }

            .key.tab {
                min-width: 2rem;
            }

            .key.caps {
                min-width: 2.5rem;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .practice-container {
            animation: fadeInUp 0.8s ease-out;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="../index.html" class="logo">âŒ¨ï¸ FingerRun</a>
            <ul class="nav-menu">
                <li><a href="../index.html">ì†Œê°œ</a></li>
                <li>
                    <a href="practice.html">
                        í•œê¸€ íƒ€ìì—°ìŠµ
                        <span class="dropdown-arrow">â–¼</span>
                    </a>
                    <div class="dropdown-menu">
                        <a href="practice.html" onclick="switchMode('consonant')">ììŒ ì—°ìŠµ</a>
                        <a href="practice.html" onclick="switchMode('vowel')">ëª¨ìŒ ì—°ìŠµ</a>
                        <a href="practice.html" onclick="switchMode('word')">ë‹¨ì–´ ì—°ìŠµ</a>
                        <a href="practice.html" onclick="switchMode('sentence')">ë¬¸ì¥ ì—°ìŠµ</a>
                    </div>
                </li>
                <li>
                    <a href="../English/practice.html">
                        ì˜ì–´ íƒ€ìì—°ìŠµ
                        <span class="dropdown-arrow">â–¼</span>
                    </a>
                    <div class="dropdown-menu">
                        <a href="../English/practice.html" onclick="switchEnglishMode('alphabet')">ì•ŒíŒŒë²³ ì—°ìŠµ</a>
                        <a href="../English/practice.html" onclick="switchEnglishMode('word')">ì˜ì–´ ë‹¨ì–´ ì—°ìŠµ</a>
                        <a href="../English/practice.html" onclick="switchEnglishMode('sentence')">ì˜ì–´ ë¬¸ì¥ ì—°ìŠµ</a>
                    </div>
                </li>
                <li>
                    <a href="game-mole.html">
                        íƒ€ìê²Œì„
                        <span class="dropdown-arrow">â–¼</span>
                    </a>
                    <div class="dropdown-menu">
                        <a href="game-mole.html">ë‘ë”ì§€ ì¡ê¸° (í•œê¸€)</a>
                        <a href="../English/game-mole.html">ë‘ë”ì§€ ì¡ê¸° (ì˜ì–´)</a>
                        <a href="game-plane.html">ë¹„í–‰ê¸° ì¡°ì¢… (í•œê¸€)</a>
                        <a href="../English/game-plane.html">ë¹„í–‰ê¸° ì¡°ì¢… (ì˜ì–´)</a>
                        <a href="game-delivery.html">íƒë°° ë¶„ë¥˜ (í•œê¸€)</a>
                        <a href="../English/game-delivery.html">íƒë°° ë¶„ë¥˜ (ì˜ì–´)</a>
                    </div>
                </li>
                <li>
                    <a href="../Certificate/word-processor.html">
                        ìê²©ì¦
                        <span class="dropdown-arrow">â–¼</span>
                    </a>
                    <div class="dropdown-menu">
                        <a href="../Certificate/word-processor.html">ì›Œë“œí”„ë¡œì„¸ì„œ</a>
                    </div>
                </li>
                <li><a href="../contact.html">ë¬¸ì˜í•˜ê¸°</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Page Header -->
        <div class="page-header">
            <h1 class="page-title">í•œê¸€ íƒ€ì ì—°ìŠµ</h1>
            <p class="page-description">ì²´ê³„ì ì¸ í•œê¸€ íƒ€ì´í•‘ ì—°ìŠµìœ¼ë¡œ ì •í™•ë„ì™€ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¤ì„¸ìš”</p>
        </div>

        <!-- Practice Container -->
        <div class="practice-container">
            <!-- Practice Menu -->
            <div class="practice-menu">
                <button class="menu-btn active" data-mode="consonant">ììŒì—°ìŠµ</button>
                <button class="menu-btn" data-mode="vowel">ëª¨ìŒì—°ìŠµ</button>
                <button class="menu-btn" data-mode="word">ë‹¨ì–´ì—°ìŠµ</button>
                <button class="menu-btn" data-mode="sentence">ë¬¸ì¥ì—°ìŠµ</button>
            </div>

            <!-- Practice Area -->
            <div class="practice-area">
                <div class="text-display" id="textDisplay"></div>

                <!-- Keyboard Area -->
                <div class="keyboard-area">
                    <div class="keyboard" id="keyboard">
                        <div class="keyboard-row">
                            <div class="key" data-key="`" data-ko=""><div class="key-dual"><span class="key-en">`</span><span class="key-ko"></span></div></div>
                            <div class="key" data-key="1" data-ko=""><div class="key-dual"><span class="key-en">1</span><span class="key-ko"></span></div></div>
                            <div class="key" data-key="2" data-ko=""><div class="key-dual"><span class="key-en">2</span><span class="key-ko"></span></div></div>
                            <div class="key" data-key="3" data-ko=""><div class="key-dual"><span class="key-en">3</span><span class="key-ko"></span></div></div>
                            <div class="key" data-key="4" data-ko=""><div class="key-dual"><span class="key-en">4</span><span class="key-ko"></span></div></div>
                            <div class="key" data-key="5" data-ko=""><div class="key-dual"><span class="key-en">5</span><span class="key-ko"></span></div></div>
                            <div class="key" data-key="6" data-ko=""><div class="key-dual"><span class="key-en">6</span><span class="key-ko"></span></div></div>
                            <div class="key" data-key="7" data-ko=""><div class="key-dual"><span class="key-en">7</span><span class="key-ko"></span></div></div>
                            <div class="key" data-key="8" data-ko=""><div class="key-dual"><span class="key-en">8</span><span class="key-ko"></span></div></div>
                            <div class="key" data-key="9" data-ko=""><div class="key-dual"><span class="key-en">9</span><span class="key-ko"></span></div></div>
                            <div class="key" data-key="0" data-ko=""><div class="key-dual"><span class="key-en">0</span><span class="key-ko"></span></div></div>
                            <div class="key" data-key="-" data-ko=""><div class="key-dual"><span class="key-en">-</span><span class="key-ko"></span></div></div>
                            <div class="key" data-key="=" data-ko=""><div class="key-dual"><span class="key-en">=</span><span class="key-ko"></span></div></div>
                            <div class="key backspace" data-key="Backspace">â†</div>
                        </div>
                        <div class="keyboard-row">
                            <div class="key tab" data-key="Tab">Tab</div>
                            <div class="key" data-key="q" data-ko="ã…‚"><div class="key-dual"><span class="key-en">Q</span><span class="key-ko">ã…‚</span></div></div>
                            <div class="key" data-key="w" data-ko="ã…ˆ"><div class="key-dual"><span class="key-en">W</span><span class="key-ko">ã…ˆ</span></div></div>
                            <div class="key" data-key="e" data-ko="ã„·"><div class="key-dual"><span class="key-en">E</span><span class="key-ko">ã„·</span></div></div>
                            <div class="key" data-key="r" data-ko="ã„±"><div class="key-dual"><span class="key-en">R</span><span class="key-ko">ã„±</span></div></div>
                            <div class="key" data-key="t" data-ko="ã……"><div class="key-dual"><span class="key-en">T</span><span class="key-ko">ã……</span></div></div>
                            <div class="key" data-key="y" data-ko="ã…›"><div class="key-dual"><span class="key-en">Y</span><span class="key-ko">ã…›</span></div></div>
                            <div class="key" data-key="u" data-ko="ã…•"><div class="key-dual"><span class="key-en">U</span><span class="key-ko">ã…•</span></div></div>
                            <div class="key" data-key="i" data-ko="ã…‘"><div class="key-dual"><span class="key-en">I</span><span class="key-ko">ã…‘</span></div></div>
                            <div class="key" data-key="o" data-ko="ã…"><div class="key-dual"><span class="key-en">O</span><span class="key-ko">ã…</span></div></div>
                            <div class="key" data-key="p" data-ko="ã…”"><div class="key-dual"><span class="key-en">P</span><span class="key-ko">ã…”</span></div></div>
                            <div class="key" data-key="[" data-ko=""><div class="key-dual"><span class="key-en">[</span><span class="key-ko"></span></div></div>
                            <div class="key" data-key="]" data-ko=""><div class="key-dual"><span class="key-en">]</span><span class="key-ko"></span></div></div>
                            <div class="key" data-key="\\" data-ko=""><div class="key-dual"><span class="key-en">\\</span><span class="key-ko"></span></div></div>
                        </div>
                        <div class="keyboard-row">
                            <div class="key caps" data-key="CapsLock">Caps</div>
                            <div class="key" data-key="a" data-ko="ã…"><div class="key-dual"><span class="key-en">A</span><span class="key-ko">ã…</span></div></div>
                            <div class="key" data-key="s" data-ko="ã„´"><div class="key-dual"><span class="key-en">S</span><span class="key-ko">ã„´</span></div></div>
                            <div class="key" data-key="d" data-ko="ã…‡"><div class="key-dual"><span class="key-en">D</span><span class="key-ko">ã…‡</span></div></div>
                            <div class="key" data-key="f" data-ko="ã„¹"><div class="key-dual"><span class="key-en">F</span><span class="key-ko">ã„¹</span></div></div>
                            <div class="key" data-key="g" data-ko="ã…"><div class="key-dual"><span class="key-en">G</span><span class="key-ko">ã…</span></div></div>
                            <div class="key" data-key="h" data-ko="ã…—"><div class="key-dual"><span class="key-en">H</span><span class="key-ko">ã…—</span></div></div>
                            <div class="key" data-key="j" data-ko="ã…“"><div class="key-dual"><span class="key-en">J</span><span class="key-ko">ã…“</span></div></div>
                            <div class="key" data-key="k" data-ko="ã…"><div class="key-dual"><span class="key-en">K</span><span class="key-ko">ã…</span></div></div>
                            <div class="key" data-key="l" data-ko="ã…£"><div class="key-dual"><span class="key-en">L</span><span class="key-ko">ã…£</span></div></div>
                            <div class="key" data-key=";" data-ko=""><div class="key-dual"><span class="key-en">;</span><span class="key-ko"></span></div></div>
                            <div class="key" data-key="'" data-ko=""><div class="key-dual"><span class="key-en">'</span><span class="key-ko"></span></div></div>
                            <div class="key enter" data-key="Enter">Enter</div>
                        </div>
                        <div class="keyboard-row">
                            <div class="key shift" data-key="ShiftLeft">Shift</div>
                            <div class="key" data-key="z" data-ko="ã…‹"><div class="key-dual"><span class="key-en">Z</span><span class="key-ko">ã…‹</span></div></div>
                            <div class="key" data-key="x" data-ko="ã…Œ"><div class="key-dual"><span class="key-en">X</span><span class="key-ko">ã…Œ</span></div></div>
                            <div class="key" data-key="c" data-ko="ã…Š"><div class="key-dual"><span class="key-en">C</span><span class="key-ko">ã…Š</span></div></div>
                            <div class="key" data-key="v" data-ko="ã…"><div class="key-dual"><span class="key-en">V</span><span class="key-ko">ã…</span></div></div>
                            <div class="key" data-key="b" data-ko="ã… "><div class="key-dual"><span class="key-en">B</span><span class="key-ko">ã… </span></div></div>
                            <div class="key" data-key="n" data-ko="ã…œ"><div class="key-dual"><span class="key-en">N</span><span class="key-ko">ã…œ</span></div></div>
                            <div class="key" data-key="m" data-ko="ã…¡"><div class="key-dual"><span class="key-en">M</span><span class="key-ko">ã…¡</span></div></div>
                            <div class="key" data-key="," data-ko=""><div class="key-dual"><span class="key-en">,</span><span class="key-ko"></span></div></div>
                            <div class="key" data-key="." data-ko=""><div class="key-dual"><span class="key-en">.</span><span class="key-ko"></span></div></div>
                            <div class="key" data-key="/" data-ko=""><div class="key-dual"><span class="key-en">/</span><span class="key-ko"></span></div></div>
                            <div class="key shift" data-key="ShiftRight">Shift</div>
                        </div>
                        <div class="keyboard-row">
                            <div class="key wide" data-key="ControlLeft">Ctrl</div>
                            <div class="key wide" data-key="MetaLeft">Win</div>
                            <div class="key wide" data-key="AltLeft">Alt</div>
                            <div class="key space" data-key=" ">Space</div>
                            <div class="key wide" data-key="AltRight">Alt</div>
                            <div class="key wide" data-key="MetaRight">Win</div>
                            <div class="key wide" data-key="ContextMenu">Menu</div>
                            <div class="key wide" data-key="ControlRight">Ctrl</div>
                        </div>
                    </div>
                </div>

                <div class="input-area">
                    <input type="text" class="typing-input" id="typingInput" placeholder="ì—¬ê¸°ì— íƒ€ì´í•‘í•˜ì„¸ìš”...">
                </div>
            </div>

            <!-- Stats -->
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="accuracy">100%</div>
                    <div class="stat-label">ì •í™•ë„</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="speed">0</div>
                    <div class="stat-label">íƒ€ì/ë¶„</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="progress">0/10</div>
                    <div class="stat-label">ì§„í–‰ë¥ </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Complete Modal -->
    <div class="modal" id="completeModal" style="display: none;">
        <div class="modal-content">
            <h2 class="complete-title">ì—°ìŠµ ì™„ë£Œ! ğŸ‰</h2>
            <div class="complete-stats">
                <div class="complete-stat">
                    <div class="complete-value" id="finalAccuracy">100%</div>
                    <div class="complete-label">ìµœì¢… ì •í™•ë„</div>
                </div>
                <div class="complete-stat">
                    <div class="complete-value" id="finalSpeed">0</div>
                    <div class="complete-label">í‰ê·  ì†ë„</div>
                </div>
            </div>
            <button class="restart-btn" id="restartBtn">ë‹¤ì‹œ ì‹œì‘</button>
        </div>
    </div>

    <script>
        class KoreanTypingPractice {
            constructor() {
                this.currentMode = 'consonant';
                this.currentText = '';
                this.currentPosition = 0;
                this.startTime = null;
                this.totalJaso = 0;
                this.correctJaso = 0;
                this.currentJamoSequence = [];
                this.currentJamoPosition = 0;
                this.currentProblem = 0;
                this.totalProblems = 10;
                this.usedWords = [];
                this.usedSentences = [];
                this.sessionSpeeds = [];
                this.sessionAccuracies = [];

                // í•œê¸€ ìëª¨ ë§¤í•‘
                this.koreanKeyMap = {
                    'q': 'ã…‚', 'w': 'ã…ˆ', 'e': 'ã„·', 'r': 'ã„±', 't': 'ã……',
                    'y': 'ã…›', 'u': 'ã…•', 'i': 'ã…‘', 'o': 'ã…', 'p': 'ã…”',
                    'a': 'ã…', 's': 'ã„´', 'd': 'ã…‡', 'f': 'ã„¹', 'g': 'ã…',
                    'h': 'ã…—', 'j': 'ã…“', 'k': 'ã…', 'l': 'ã…£',
                    'z': 'ã…‹', 'x': 'ã…Œ', 'c': 'ã…Š', 'v': 'ã…',
                    'b': 'ã… ', 'n': 'ã…œ', 'm': 'ã…¡'
                };

                // í‚¤ë³´ë“œ ë§¤í•‘ (í•œê¸€ ìëª¨ -> í‚¤)
                this.keyboardMap = {};
                for (let [key, korean] of Object.entries(this.koreanKeyMap)) {
                    this.keyboardMap[korean] = key;
                }

                // ì¶”ê°€ í•œê¸€ ìëª¨ ë§¤í•‘ (ë³µí•©ëª¨ìŒ, ìŒììŒ)
                this.keyboardMap['ã„²'] = 'r';
                this.keyboardMap['ã„¸'] = 'e';
                this.keyboardMap['ã…ƒ'] = 'q';
                this.keyboardMap['ã…†'] = 't';
                this.keyboardMap['ã…‰'] = 'w';
                this.keyboardMap['ã…’'] = 'o'; // ã… í‚¤ë§Œ
                this.keyboardMap['ã…–'] = 'p'; // ã…” í‚¤ë§Œ
                this.keyboardMap[' '] = ' '; // ìŠ¤í˜ì´ìŠ¤ë°”

                // ë³µí•©ëª¨ìŒ ë§¤í•‘ (ë™ì‹œì— ë‘ í‚¤ ê°•ì¡°ìš©)
                this.complexVowelMap = {
                    'ã…˜': ['h', 'k'], // ã…— + ã…
                    'ã…™': ['h', 'o'], // ã…— + ã…
                    'ã…š': ['h', 'l'], // ã…— + ã…£
                    'ã…': ['n', 'j'], // ã…œ + ã…“
                    'ã…': ['n', 'p'], // ã…œ + ã…”
                    'ã…Ÿ': ['n', 'l'], // ã…œ + ã…£
                    'ã…¢': ['m', 'l']  // ã…¡ + ã…£
                };

                this.practiceData = {
                    consonant: ['ã„±', 'ã„´', 'ã„·', 'ã„¹', 'ã…', 'ã…‚', 'ã……', 'ã…‡', 'ã…ˆ', 'ã…Š', 'ã…‹', 'ã…Œ', 'ã…', 'ã…', 'ã„²', 'ã„¸', 'ã…ƒ', 'ã…†', 'ã…‰'],
                    vowel: ['ã…', 'ã…‘', 'ã…“', 'ã…•', 'ã…—', 'ã…›', 'ã…œ', 'ã… ', 'ã…¡', 'ã…£', 'ã…', 'ã…’', 'ã…”', 'ã…–', 'ã…˜', 'ã…™', 'ã…š', 'ã…', 'ã…', 'ã…Ÿ', 'ã…¢'],
                    word: {
                        easy: [
                            'ì‚¬ëŒ', 'í•™êµ', 'ì§‘', 'ë¬¼', 'ë¶ˆ', 'í•˜ëŠ˜', 'ë•…', 'ë°”ë‹¤', 'ì‚°', 'ê°•',
                            'ë‚˜ë¬´', 'ê½ƒ', 'ìƒˆ', 'ê³ ì–‘ì´', 'ê°œ', 'ì±…', 'ì—°í•„', 'ì˜ì', 'ì±…ìƒ', 'ë¬¸',
                            'ì°½ë¬¸', 'ì‹œê³„', 'ì „í™”', 'ì»´í“¨í„°', 'í…”ë ˆë¹„ì „', 'ëƒ‰ì¥ê³ ', 'ì¹¨ëŒ€', 'ì†ŒíŒŒ', 'ë°¥', 'ë¹µ',
                            'ìš°ìœ ', 'ì‚¬ê³¼', 'ë°”ë‚˜ë‚˜', 'ë”¸ê¸°', 'í¬ë„', 'ì˜¤ë Œì§€', 'ì•„ì¹¨', 'ì ì‹¬', 'ì €ë…', 'ì›”ìš”ì¼',
                            'í™”ìš”ì¼', 'ìˆ˜ìš”ì¼', 'ëª©ìš”ì¼', 'ê¸ˆìš”ì¼', 'í† ìš”ì¼', 'ì¼ìš”ì¼', 'ë´„', 'ì—¬ë¦„', 'ê°€ì„', 'ê²¨ìš¸',
                            'ë‚ ì”¨', 'ë¹„', 'ëˆˆ', 'ë°”ëŒ', 'êµ¬ë¦„', 'í•´', 'ë‹¬', 'ë³„', 'ë¹¨ê°„ìƒ‰', 'íŒŒë€ìƒ‰',
                            'ë…¸ë€ìƒ‰', 'ì´ˆë¡ìƒ‰', 'í•˜ì–€ìƒ‰', 'ê²€ì€ìƒ‰', 'ì—„ë§ˆ', 'ì•„ë¹ ', 'í˜•', 'ë™ìƒ', 'í• ë¨¸ë‹ˆ', 'í• ì•„ë²„ì§€',
                            'ë³‘ì›', 'ì•½êµ­', 'ì€í–‰', 'ìš°ì²´êµ­', 'ë§ˆíŠ¸', 'ê°€ê²Œ', 'ë²„ìŠ¤', 'ì§€í•˜ì² ', 'íƒì‹œ', 'ìì „ê±°',
                            'ìë™ì°¨', 'ë¹„í–‰ê¸°', 'ê¸°ì°¨', 'ë°°', 'ë°”ì§€', 'ì¹˜ë§ˆ', 'ì˜·', 'ì‹ ë°œ', 'ëª¨ì', 'ê°€ë°©',
                            'ìš°ì‚°', 'ëˆ', 'ì¹´ë“œ', 'íœ´ëŒ€í°', 'ë…¸íŠ¸ë¶', 'ë§ˆìš°ìŠ¤', 'í‚¤ë³´ë“œ', 'ìŒì‹', 'ë¬¼ê±´', 'ì¥ë‚œê°',
                            'ìš´ë™', 'ì¶•êµ¬', 'ì•¼êµ¬', 'ë†êµ¬', 'ìˆ˜ì˜', 'ë‹¬ë¦¬ê¸°'
                        ],
                        medium: [
                            'ì •ì¹˜', 'ê²½ì œ', 'ì‚¬íšŒ', 'ë¬¸í™”', 'ê³¼í•™', 'ê¸°ìˆ ', 'ì—­ì‚¬', 'ì² í•™', 'ì˜ˆìˆ ', 'ìŒì•…',
                            'ë¬¸í•™', 'ì†Œì„¤', 'ì‹œì¸', 'ì‘ê°€', 'íˆ¬ì', 'ì£¼ì‹', 'ë¶€ë™ì‚°', 'ì°½ì—…', 'í˜ì‹ ', 'ë¦¬ë”ì‹­',
                            'ë„ì „', 'ì„±ê³µ', 'ì‹¤íŒ¨', 'ì„±ì¥', 'ë³€í™”', 'ê¸°íšŒ', 'ê¿ˆ', 'ëª©í‘œ', 'ì—´ì •', 'ë…¸ë ¥',
                            'ì¸ë‚´', 'ìš©ê¸°', 'í¬ë§', 'ìì‹ ê°', 'ì±…ì„', 'ì •ì˜', 'í‰ë“±', 'ììœ ', 'ë¯¼ì£¼ì£¼ì˜', 'ì¸ê¶Œ',
                            'í™˜ê²½', 'ê¸°í›„', 'ì—ë„ˆì§€', 'ë¯¸ë˜', 'ë°œì „', 'êµìœ¡', 'ì—°êµ¬', 'ì‹¤í—˜', 'ë°œê²¬', 'ì°½ì‘',
                            'ì˜ê°', 'ìƒìƒë ¥', 'ì§€í˜œ', 'ì§€ì‹', 'ì§„ë¦¬', 'ì•„ë¦„ë‹¤ì›€', 'ê°ë™', 'ì‚¬ë‘', 'ìš°ì •', 'ê°€ì¡±',
                            'ê³µë™ì²´', 'ì†Œí†µ', 'ì´í•´', 'ë°°ë ¤', 'ê°ì‚¬', 'í–‰ë³µ', 'í‰í™”', 'ê±´ê°•', 'ì—¬í–‰', 'ëª¨í—˜',
                            'ê²½í—˜', 'ì¶”ì–µ', 'ì‹œê°„', 'ê³µê°„', 'ìì—°', 'ë„ì‹œ', 'ë¬¸ëª…', 'ì „í†µ', 'í˜„ëŒ€', 'ê¸€ë¡œë²Œ',
                            'ë””ì§€í„¸', 'ì¸ê³µì§€ëŠ¥', 'ë¡œë´‡', 'ìš°ì£¼', 'ìƒëª…', 'ì˜ë£Œ', 'ì¹˜ë£Œ', 'ì˜ˆë°©', 'ìš´ë™', 'ìŠ¤í¬ì¸ ',
                            'ì „ëµ', 'ê³„íš', 'ê´€ë¦¬', 'ë¶„ì„', 'í‰ê°€', 'ê°œì„ ', 'íš¨ìœ¨', 'í’ˆì§ˆ', 'ì„œë¹„ìŠ¤', 'ê³ ê°',
                            'ì‹œì¥', 'ê²½ìŸ', 'í˜‘ë ¥', 'ë„¤íŠ¸ì›Œí¬', 'í”Œë«í¼', 'ë°ì´í„°', 'ì •ë³´', 'í†µì‹ ', 'ë³´ì•ˆ', 'ê°œì¸ì •ë³´', 'í”„ë¼ì´ë²„ì‹œ'
                        ],
                        hard: [
                            'ë¿Œë¦¬ê¹Šì€', 'ë¹¨ê°›ê²Œ', 'ê¹Œë§£ê²Œ', 'ë½€ì–—ê²Œ', 'ë¹ ëœ¨ë¦¬ë‹¤', 'ëœ¨ëœ»ë¯¸ì§€ê·¼í•˜ë‹¤', 'êº¼ì¹ êº¼ì¹ í•˜ë‹¤', 'ì‚ê±±ì‚ê±±', 'ë’¤ëš±ë’¤ëš±', 'ì—‡ê°ˆë¦¬ë‹¤',
                            'ì–½í˜€ìˆë‹¤', 'ì›…ì„±ì›…ì„±', 'ìš°ë¥´ë¥´', 'ìê¸€ìê¸€', 'ì­ˆê¸€ì­ˆê¸€', 'ë–¨ë– ë¦„í•˜ë‹¤', 'ìš°ê¸€ìš°ê¸€', 'ì‘¥ìŠ¤ëŸ½ë‹¤', 'ì—‰ì„±í•˜ë‹¤', 'ì‚ëš¤ì–´ì§€ë‹¤',
                            'ê¹œë¹¡ê¹œë¹¡', 'íë­‡í•˜ë‹¤', 'ì•„ëœ©í•˜ë‹¤', 'ê¹ŒíƒˆìŠ¤ëŸ½ë‹¤', 'ê¹”ë”í•˜ë‹¤', 'ê¹Œë¬´ì¡ì¡í•˜ë‹¤', 'ë¹¼ê³¡í•˜ë‹¤', 'ë¹™ê¸€ë¹™ê¸€', 'ê»„ê»„ì›ƒë‹¤', 'í‚¥í‚¥ê±°ë¦¬ë‹¤',
                            'ì”©ì”©í•˜ë‹¤', 'ì­‰ì­‰ë»—ë‹¤', 'íœ˜ì²­íœ˜ì²­', 'í”ë“¤í”ë“¤', 'ìš¸í‰ë¶ˆí‰', 'ë°êµ´ë°êµ´', 'ë±…ê¸€ë±…ê¸€', 'ê»‘ì¶©ê»‘ì¶©', 'íŒ”ë‘íŒ”ë‘', 'í„ëŸ­í„ëŸ­',
                            'ë‚˜í’€ë‚˜í’€', 'ì‚´ë‘ì‚´ë‘', 'ì£¼ë ì£¼ë ', 'ì¡¸ì¡¸íë¥´ë‹¤', 'ì°°ë‘ì°°ë‘', 'ì¶œë ì¶œë ', 'ì¶œë ê±°ë¦¬ë‹¤', 'ì² ì©ì² ì©', 'ì²¨ë²™ì²¨ë²™', 'ë›°ì–´ì˜¬ë¼ê°€ë‹¤',
                            'ì£¼ì €ì•‰ë‹¤', 'ì—ë“œë¦¬ë‹¤', 'ìš°ëšì„œë‹¤', 'ë’¤ëŒì•„ë³´ë‹¤', 'ë‚´ë ¤ë‹¤ë³´ë‹¤', 'ì˜¬ë ¤ë‹¤ë³´ë‹¤', 'ê°€ë¡œì§ˆëŸ¬ê°€ë‹¤', 'ë¹„í‹€ê±°ë¦¬ë‹¤', 'ë’¤ëš±ê±°ë¦¬ë‹¤', 'ë¹„ìŠ¤ë“¬íˆ',
                            'ì•„ìŠ¬ì•„ìŠ¬', 'ê°€íŒŒë¥´ë‹¤', 'ë¾°ì¡±í•˜ë‹¤', 'ë‘ë£¨ë­‰ìˆ í•˜ë‹¤', 'ì–´ê¹¨ë™ë¬´í•˜ë‹¤', 'ì†ë¼‰ì¹˜ë‹¤', 'ë°œê°€ë½ì§ˆí•˜ë‹¤', 'ëˆˆì§“í•˜ë‹¤', 'ë¨¸ë¦¬ê°ë‹¤', 'ì´ë§ˆì°¡ê·¸ë¦¬ë‹¤',
                            'ì½”ì›ƒìŒì¹˜ë‹¤', 'ì…ê¾¸ë¬¼ê±°ë¦¬ë‹¤'
                        ]
                    },
                    sentence: [
                        'ê²½ì œ ì„±ì¥ê³¼ ì‚¬íšŒ ë°œì „ì€ ì„œë¡œ ë°€ì ‘í•œ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤.',
                        'ê¸°ìˆ  í˜ì‹ ì´ ìš°ë¦¬ì˜ ë¯¸ë˜ë¥¼ ë°”ê¾¸ê³  ìˆìŠµë‹ˆë‹¤.',
                        'í™˜ê²½ ë³´í˜¸ëŠ” ë‹¤ìŒ ì„¸ëŒ€ë¥¼ ìœ„í•œ ì¤‘ìš”í•œ ê³¼ì œì…ë‹ˆë‹¤.',
                        'êµìœ¡ì˜ í˜ìœ¼ë¡œ ë” ë‚˜ì€ ì„¸ìƒì„ ë§Œë“¤ì–´ê°‘ì‹œë‹¤.',
                        'ê¿ˆì„ í¬ê¸°í•˜ì§€ ì•ŠëŠ” ì‚¬ëŒë§Œì´ ì„±ê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                        'ì‹¤íŒ¨ëŠ” ì„±ê³µìœ¼ë¡œ ê°€ëŠ” ê³¼ì •ì¼ ë¿ì…ë‹ˆë‹¤.',
                        'ì°½ì˜ì  ì‚¬ê³ ê°€ ë¬¸ì œ í•´ê²°ì˜ ì—´ì‡ ì…ë‹ˆë‹¤.',
                        'ê¸€ë¡œë²Œ ì‹œëŒ€ì—ëŠ” ì†Œí†µ ëŠ¥ë ¥ì´ í•„ìˆ˜ì…ë‹ˆë‹¤.',
                        'ì¸ê³µì§€ëŠ¥ì´ ì¸ê°„ì˜ ì‚¶ì„ ì–´ë–»ê²Œ ë³€í™”ì‹œí‚¬ê¹Œìš”?',
                        'ë¯¼ì£¼ì£¼ì˜ëŠ” ì‹œë¯¼ì˜ ì°¸ì—¬ë¡œ ì™„ì„±ë©ë‹ˆë‹¤.',
                        'ì˜¤ëŠ˜ ë‚ ì”¨ê°€ ì •ë§ ì¢‹ì•„ì„œ ì‚°ì±…í•˜ê¸° ì¢‹ì€ í•˜ë£¨ì…ë‹ˆë‹¤.',
                        'ì»¤í”¼ í•œ ì”ê³¼ í•¨ê»˜ ì±…ì„ ì½ëŠ” ì‹œê°„ì´ ê°€ì¥ í–‰ë³µí•©ë‹ˆë‹¤.',
                        'ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë‚´ëŠ” ì‹œê°„ì€ ë¬´ì—‡ê³¼ë„ ë°”ê¿€ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
                        'ê±´ê°•í•œ ì‹ìŠµê´€ê³¼ ê·œì¹™ì ì¸ ìš´ë™ì´ ì¥ìˆ˜ì˜ ë¹„ê²°ì…ë‹ˆë‹¤.',
                        'ìƒˆë¡œìš´ ì–¸ì–´ë¥¼ ë°°ìš°ëŠ” ê²ƒì€ ìƒˆë¡œìš´ ì„¸ê³„ë¥¼ ë°œê²¬í•˜ëŠ” ì¼ì…ë‹ˆë‹¤.',
                        'ìŒì•…ì„ ë“¤ìœ¼ë©´ ë§ˆìŒì´ í¸ì•ˆí•´ì§€ê³  ìŠ¤íŠ¸ë ˆìŠ¤ê°€ í’€ë¦½ë‹ˆë‹¤.',
                        'ì—¬í–‰ì„ í†µí•´ ë‹¤ì–‘í•œ ë¬¸í™”ë¥¼ ê²½í—˜í•˜ê³  ì‹œì•¼ë¥¼ ë„“í ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                        'ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ë‚˜ëˆ„ëŠ” ëŒ€í™”ëŠ” ì¸ìƒì˜ ì†Œì¤‘í•œ ê¸°ì¨ì…ë‹ˆë‹¤.',
                        'ë…ì„œëŠ” ìƒìƒë ¥ì„ ê¸°ë¥´ê³  ì§€ì‹ì„ ìŒ“ëŠ” ìµœê³ ì˜ ë°©ë²•ì…ë‹ˆë‹¤.',
                        'ìš”ë¦¬ë¥¼ í•  ë•Œ ê°€ì¡±ì„ ìƒê°í•˜ë©´ ë”ìš± ë§›ìˆê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                        'ìŠ¤ë§ˆíŠ¸í°ì´ ìš°ë¦¬ ìƒí™œì— ë¯¸ì¹œ ì˜í–¥ì„ í•œë²ˆ ìƒê°í•´ë³´ì„¸ìš”.',
                        'ì§€êµ¬ì˜¨ë‚œí™” ë¬¸ì œëŠ” ì „ ì„¸ê³„ê°€ í•¨ê»˜ í•´ê²°í•´ì•¼ í•  ê³¼ì œì…ë‹ˆë‹¤.',
                        'ì¸í„°ë„·ì˜ ë°œë‹¬ë¡œ ì •ë³´ ì ‘ê·¼ì„±ì´ í¬ê²Œ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.',
                        'ì½”ë¡œë‚˜19 íŒ¬ë°ë¯¹ì€ ìš°ë¦¬ ì‚¬íšŒë¥¼ ì™„ì „íˆ ë°”ê¾¸ì—ˆìŠµë‹ˆë‹¤.',
                        'ì›ê²©ê·¼ë¬´ê°€ ìƒˆë¡œìš´ ì¼í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìë¦¬ì¡ê³  ìˆìŠµë‹ˆë‹¤.',
                        'ë©”íƒ€ë²„ìŠ¤ê°€ ë¯¸ë˜ ì‚¬íšŒì˜ ìƒˆë¡œìš´ í”Œë«í¼ì´ ë  ê²ƒì…ë‹ˆë‹¤.',
                        'ë¸”ë¡ì²´ì¸ ê¸°ìˆ ì´ ê¸ˆìœµ ì‹œìŠ¤í…œì„ í˜ì‹ í•˜ê³  ìˆìŠµë‹ˆë‹¤.',
                        'ì „ê¸°ìë™ì°¨ ë³´ê¸‰ìœ¼ë¡œ ì¹œí™˜ê²½ êµí†µìˆ˜ë‹¨ì´ í™•ì‚°ë˜ê³  ìˆìŠµë‹ˆë‹¤.',
                        'ì¬ìƒì—ë„ˆì§€ ë°œì „ì´ ê¸°í›„ë³€í™” ëŒ€ì‘ì˜ í•µì‹¬ì…ë‹ˆë‹¤.',
                        'í”Œë¼ìŠ¤í‹± ì‚¬ìš© ì¤„ì´ê¸°ëŠ” í™˜ê²½ ë³´í˜¸ì˜ ì²«ê±¸ìŒì…ë‹ˆë‹¤.',
                        'KíŒì´ ì „ ì„¸ê³„ ì²­ë…„ë“¤ì—ê²Œ í° ì¸ê¸°ë¥¼ ì–»ê³  ìˆìŠµë‹ˆë‹¤.',
                        'í•œêµ­ ë“œë¼ë§ˆê°€ ë„·í”Œë¦­ìŠ¤ë¥¼ í†µí•´ ì„¸ê³„ë¡œ í¼ì ¸ë‚˜ê°€ê³  ìˆìŠµë‹ˆë‹¤.',
                        'ì˜¨ë¼ì¸ ì‡¼í•‘ëª°ì´ ì „í†µì ì¸ ì˜¤í”„ë¼ì¸ ë§¤ì¥ì„ ëŒ€ì²´í•˜ê³  ìˆìŠµë‹ˆë‹¤.',
                        'ë°°ë‹¬ ì•±ì˜ ì„±ì¥ìœ¼ë¡œ ì™¸ì‹ ë¬¸í™”ê°€ í¬ê²Œ ë³€í™”í–ˆìŠµë‹ˆë‹¤.',
                        'ìœ íŠœë¸ŒëŠ” ìƒˆë¡œìš´ ì§ì—…êµ°ì„ ë§Œë“¤ì–´ë‚´ëŠ” í”Œë«í¼ì…ë‹ˆë‹¤.',
                        'ì†Œì…œë¯¸ë””ì–´ëŠ” í˜„ëŒ€ì¸ì˜ ì†Œí†µ ë°©ì‹ì„ ì™„ì „íˆ ë°”ê¾¸ì—ˆìŠµë‹ˆë‹¤.',
                        'ê²Œì„ ì‚°ì—…ì´ ë¬¸í™” ì½˜í…ì¸ ì˜ ìƒˆë¡œìš´ ì˜ì—­ìœ¼ë¡œ ì„±ì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤.',
                        'ì›¹íˆ°ì´ í•œêµ­ ë¬¸í™” ì½˜í…ì¸ ì˜ ìƒˆë¡œìš´ ê°•ìë¡œ ë– ì˜¤ë¥´ê³  ìˆìŠµë‹ˆë‹¤.',
                        'ì¸ê³µì§€ëŠ¥ ê¸°ìˆ ì´ ì˜ë£Œ ë¶„ì•¼ì—ì„œ í˜ì‹ ì„ ì´ëŒê³  ìˆìŠµë‹ˆë‹¤.',
                        'ë¡œë´‡ ê¸°ìˆ ì˜ ë°œì „ì´ ì œì¡°ì—… ìë™í™”ë¥¼ ê°€ì†í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤.',
                        'ë¹…ë°ì´í„° ë¶„ì„ì´ ë§ˆì¼€íŒ…ê³¼ ê´‘ê³ ì˜ íŒ¨ëŸ¬ë‹¤ì„ì„ ë°”ê¾¸ê³  ìˆìŠµë‹ˆë‹¤.',
                        'í´ë¼ìš°ë“œ ì»´í“¨íŒ…ì´ ê¸°ì—…ì˜ IT ì¸í”„ë¼ë¥¼ í˜ì‹ í•˜ê³  ìˆìŠµë‹ˆë‹¤.',
                        'ì‚¬ë¬¼ì¸í„°ë„· ê¸°ìˆ ì´ ìŠ¤ë§ˆíŠ¸í™ˆ ì‹œëŒ€ë¥¼ ì—´ì–´ê°€ê³  ìˆìŠµë‹ˆë‹¤.',
                        'ë“œë¡  ê¸°ìˆ ì´ ë¬¼ë¥˜ì™€ ë°°ì†¡ ì‹œìŠ¤í…œì„ ë³€í™”ì‹œí‚¤ê³  ìˆìŠµë‹ˆë‹¤.',
                        'ê°€ìƒí˜„ì‹¤ ê¸°ìˆ ì´ êµìœ¡ê³¼ í›ˆë ¨ ë¶„ì•¼ì—ì„œ í™œìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤.',
                        'ì–‘ìì»´í“¨í„°ê°€ ì»´í“¨íŒ…ì˜ ìƒˆë¡œìš´ ë¯¸ë˜ë¥¼ ì œì‹œí•˜ê³  ìˆìŠµë‹ˆë‹¤.',
                        'ë°”ì´ì˜¤ ê¸°ìˆ ì´ ì§ˆë³‘ ì¹˜ë£Œì™€ ì˜ˆë°©ì— ìƒˆë¡œìš´ ê°€ëŠ¥ì„±ì„ ì—´ê³  ìˆìŠµë‹ˆë‹¤.',
                        'ë‚˜ë…¸ ê¸°ìˆ ì´ ì†Œì¬ ê³¼í•™ì˜ í˜ì‹ ì„ ì´ëŒì–´ë‚´ê³  ìˆìŠµë‹ˆë‹¤.',
                        'ìš°ì£¼ ê¸°ìˆ ì˜ ë°œì „ìœ¼ë¡œ í™”ì„± íƒì‚¬ê°€ í˜„ì‹¤ì´ ë˜ì–´ê°€ê³  ìˆìŠµë‹ˆë‹¤.',
                        'ì§€ì† ê°€ëŠ¥í•œ ë°œì „ì„ ìœ„í•´ì„œëŠ” ëª¨ë“  ë¶„ì•¼ì˜ í˜‘ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤.'
                    ]
                };

                this.init();
            }

            init() {
                this.bindEvents();
                this.generateText();
                this.updateDisplay();
            }

            bindEvents() {
                document.querySelectorAll('.menu-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        this.changeMode(e.target.dataset.mode);
                    });
                });

                const typingInput = document.getElementById('typingInput');
                
                // input ì´ë²¤íŠ¸ë¡œ í…ìŠ¤íŠ¸ ë³€í™” ê°ì§€
                typingInput.addEventListener('input', (e) => {
                    try {
                        this.handleInput(e.target.value);
                    } catch (error) {
                        document.getElementById('accuracy').textContent = '100%';
                        document.getElementById('speed').textContent = '0';
                    }
                });

                // ì—”í„°/ìŠ¤í˜ì´ìŠ¤ë¡œ ë‹¤ìŒ ë¬¸ì œ
                typingInput.addEventListener('keydown', (e) => {
                    if ((e.key === ' ' || e.key === 'Enter') && this.currentPosition >= this.currentText.length) {
                        e.preventDefault();
                        this.nextProblem();
                    }
                });

                document.getElementById('restartBtn').addEventListener('click', () => {
                    this.restart();
                });
            }

            changeMode(mode) {
                this.currentMode = mode;
                this.currentProblem = 0;
                this.resetStats();
                
                document.querySelectorAll('.menu-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
                
                this.generateText();
                this.updateDisplay();
                document.getElementById('typingInput').value = '';
                document.getElementById('typingInput').focus();
            }

            generateText() {
                const data = this.practiceData[this.currentMode];
                
                if (this.currentMode === 'consonant' || this.currentMode === 'vowel') {
                    const selected = [];
                    for (let i = 0; i < 7; i++) {
                        selected.push(data[Math.floor(Math.random() * data.length)]);
                    }
                    this.currentText = selected.join(' ');
                } else if (this.currentMode === 'word') {
                    const selected = [];
                    const easyWords = this.practiceData.word.easy.filter(word => !this.usedWords.includes(word));
                    const mediumWords = this.practiceData.word.medium.filter(word => !this.usedWords.includes(word));
                    const hardWords = this.practiceData.word.hard.filter(word => !this.usedWords.includes(word));
                    
                    // ì‚¬ìš© ê°€ëŠ¥í•œ ë‹¨ì–´ê°€ ì—†ìœ¼ë©´ ì´ˆê¸°í™”
                    if (easyWords.length === 0 && mediumWords.length === 0 && hardWords.length === 0) {
                        this.usedWords = [];
                    }
                    
                    const availableEasy = easyWords.length > 0 ? easyWords : this.practiceData.word.easy;
                    const availableMedium = mediumWords.length > 0 ? mediumWords : this.practiceData.word.medium;
                    const availableHard = hardWords.length > 0 ? hardWords : this.practiceData.word.hard;
                    
                    const easyWord = availableEasy[Math.floor(Math.random() * availableEasy.length)];
                    const mediumWord = availableMedium[Math.floor(Math.random() * availableMedium.length)];
                    const hardWord = availableHard[Math.floor(Math.random() * availableHard.length)];
                    
                    // ì‚¬ìš©ëœ ë‹¨ì–´ ê¸°ë¡
                    this.usedWords.push(easyWord, mediumWord, hardWord);
                    
                    const words = [easyWord, mediumWord, hardWord];
                    for (let i = words.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [words[i], words[j]] = [words[j], words[i]];
                    }
                    
                    this.currentText = words.join(' ');
                } else {
                    const availableSentences = data.filter(sentence => !this.usedSentences.includes(sentence));
                    
                    // ì‚¬ìš© ê°€ëŠ¥í•œ ë¬¸ì¥ì´ ì—†ìœ¼ë©´ ì´ˆê¸°í™”
                    if (availableSentences.length === 0) {
                        this.usedSentences = [];
                        availableSentences.push(...data);
                    }
                    
                    const randomIndex = Math.floor(Math.random() * availableSentences.length);
                    this.currentText = availableSentences[randomIndex];
                    
                    // ì‚¬ìš©ëœ ë¬¸ì¥ ê¸°ë¡
                    this.usedSentences.push(this.currentText);
                }

                this.currentPosition = 0;
                this.startTime = null;
                this.correctJaso = 0;
                this.totalJaso = 0;
                this.currentJamoSequence = [];
                this.currentJamoPosition = 0;

                // í…ìŠ¤íŠ¸ì˜ ì „ì²´ ìëª¨ ì‹œí€€ìŠ¤ ìƒì„±
                this.generateJamoSequence();

                // ì´ˆê¸° í‚¤ë³´ë“œ ê°•ì¡°
                this.updateKeyboardHighlight();

                const textDisplay = document.getElementById('textDisplay');
                if (this.currentMode === 'sentence') {
                    textDisplay.classList.add('sentence-mode');
                } else {
                    textDisplay.classList.remove('sentence-mode');
                }
            }

            // í…ìŠ¤íŠ¸ ì „ì²´ë¥¼ ìëª¨ ë‹¨ìœ„ë¡œ ë¶„í•´í•˜ì—¬ ì‹œí€€ìŠ¤ ìƒì„±
            generateJamoSequence() {
                this.currentJamoSequence = [];
                for (let i = 0; i < this.currentText.length; i++) {
                    const char = this.currentText[i];
                    if (char === ' ') {
                        this.currentJamoSequence.push(' ');
                    } else {
                        const decomposed = this.decomposeHangul(char);
                        if (decomposed && decomposed.length > 0) {
                            for (let jamo of decomposed) {
                                this.currentJamoSequence.push(jamo);
                            }
                        } else {
                            this.currentJamoSequence.push(char);
                        }
                    }
                }
            }

            countJaso(text) {
                let jasoCount = 0;
                for (let char of text) {
                    try {
                        if (char === ' ') {
                            jasoCount += 1;
                        } else if (/[ê°€-í£]/.test(char)) {
                            const unicode = char.charCodeAt(0) - 0xAC00;
                            if (unicode >= 0 && unicode <= 11171) {
                                const jong = unicode % 28;
                                jasoCount += 2;
                                if (jong > 0) jasoCount += 1;
                            } else {
                                jasoCount += 1;
                            }
                        } else {
                            jasoCount += 1;
                        }
                    } catch (error) {
                        jasoCount += 1;
                    }
                }
                return jasoCount;
            }

            updateDisplay() {
                try {
                    const display = document.getElementById('textDisplay');
                    display.innerHTML = '';

                    for (let i = 0; i < this.currentText.length; i++) {
                        const span = document.createElement('span');
                        span.className = 'char';
                        
                        if (this.currentText[i] === ' ') {
                            span.innerHTML = '&nbsp;';
                            span.classList.add('space');
                        } else {
                            span.textContent = this.currentText[i];
                        }

                        if (i < this.currentPosition) {
                            span.classList.add('correct');
                        } else if (i === this.currentPosition) {
                            span.classList.add('current');
                        }

                        display.appendChild(span);
                    }

                    if (this.currentMode === 'sentence') {
                        this.applyInitialColors();
                    }

                    this.updateKeyboardHighlight();
                    document.getElementById('progress').textContent = `${this.currentProblem + 1}/${this.totalProblems}`;
                } catch (error) {
                    // UI ë Œë”ë§ ì˜¤ë¥˜ ì‹œ ê¸°ë³¸ ìƒíƒœ ìœ ì§€
                }
            }

            // í•œê¸€ ë¬¸ìë¥¼ ìëª¨ë¡œ ë¶„í•´í•˜ëŠ” í•¨ìˆ˜ (ë³µí•©ëª¨ìŒ ì˜¬ë°”ë¥¸ ìˆœì„œë¡œ ë¶„í•´)
            decomposeHangul(char) {
                const code = char.charCodeAt(0);
                
                // ê°œë³„ ìëª¨ì¸ ê²½ìš°
                if ((code >= 0x3131 && code <= 0x314E) || (code >= 0x314F && code <= 0x3163)) {
                    // ë³µí•©ëª¨ìŒ ê°œë³„ ìëª¨ ë¶„í•´ (íƒ€ì ì…ë ¥ ìˆœì„œëŒ€ë¡œ)
                    switch (char) {
                        case 'ã…˜': // ã…— + ã…
                            return ['ã…—', 'ã…'];
                        case 'ã…™': // ã…— + ã…
                            return ['ã…—', 'ã…'];
                        case 'ã…š': // ã…— + ã…£
                            return ['ã…—', 'ã…£'];
                        case 'ã…': // ã…œ + ã…“
                            return ['ã…œ', 'ã…“'];
                        case 'ã…': // ã…œ + ã…”
                            return ['ã…œ', 'ã…”'];
                        case 'ã…Ÿ': // ã…œ + ã…£
                            return ['ã…œ', 'ã…£'];
                        case 'ã…¢': // ã…¡ + ã…£
                            return ['ã…¡', 'ã…£'];
                        case 'ã…’': // ã… + ã…£
                            return ['ã…', 'ã…£'];
                        case 'ã…–': // ã…” + ã…£
                            return ['ã…”', 'ã…£'];
                        default:
                            return [char];
                    }
                }

                // ì™„ì„±ëœ í•œê¸€ì¸ì§€ í™•ì¸ (ê°€-í£)
                if (code >= 0xAC00 && code <= 0xD7A3) {
                    const baseCode = code - 0xAC00;
                    const choIndex = Math.floor(baseCode / 588);
                    const jungIndex = Math.floor((baseCode % 588) / 28);
                    const jongIndex = baseCode % 28;

                    const choSeong = ['ã„±', 'ã„²', 'ã„´', 'ã„·', 'ã„¸', 'ã„¹', 'ã…', 'ã…‚', 'ã…ƒ', 'ã……', 'ã…†', 'ã…‡', 'ã…ˆ', 'ã…‰', 'ã…Š', 'ã…‹', 'ã…Œ', 'ã…', 'ã…'];
                    const jungSeong = ['ã…', 'ã…', 'ã…‘', 'ã…’', 'ã…“', 'ã…”', 'ã…•', 'ã…–', 'ã…—', 'ã…˜', 'ã…™', 'ã…š', 'ã…›', 'ã…œ', 'ã…', 'ã…', 'ã…Ÿ', 'ã… ', 'ã…¡', 'ã…¢', 'ã…£'];
                    const jongSeong = ['', 'ã„±', 'ã„²', 'ã„³', 'ã„´', 'ã„µ', 'ã„¶', 'ã„·', 'ã„¹', 'ã„º', 'ã„»', 'ã„¼', 'ã„½', 'ã„¾', 'ã„¿', 'ã…€', 'ã…', 'ã…‚', 'ã…„', 'ã……', 'ã…†', 'ã…‡', 'ã…ˆ', 'ã…Š', 'ã…‹', 'ã…Œ', 'ã…', 'ã…'];

                    const result = [];

                    // ì´ˆì„± ì¶”ê°€
                    if (choSeong[choIndex]) {
                        result.push(choSeong[choIndex]);
                    }

                    // ì¤‘ì„± ì¶”ê°€ - ë³µí•©ëª¨ìŒì„ íƒ€ì ìˆœì„œë¡œ ë¶„í•´
                    const jung = jungSeong[jungIndex];
                    if (jung) {
                        switch (jung) {
                            case 'ã…˜': // ã…— + ã…
                                result.push('ã…—');
                                result.push('ã…');
                                break;
                            case 'ã…™': // ã…— + ã…
                                result.push('ã…—');
                                result.push('ã…');
                                break;
                            case 'ã…š': // ã…— + ã…£
                                result.push('ã…—');
                                result.push('ã…£');
                                break;
                            case 'ã…': // ã…œ + ã…“
                                result.push('ã…œ');
                                result.push('ã…“');
                                break;
                            case 'ã…': // ã…œ + ã…”
                                result.push('ã…œ');
                                result.push('ã…”');
                                break;
                            case 'ã…Ÿ': // ã…œ + ã…£
                                result.push('ã…œ');
                                result.push('ã…£');
                                break;
                            case 'ã…¢': // ã…¡ + ã…£
                                result.push('ã…¡');
                                result.push('ã…£');
                                break;
                            case 'ã…’': // ã… + ã…£
                                result.push('ã…');
                                result.push('ã…£');
                                break;
                            case 'ã…–': // ã…” + ã…£
                                result.push('ã…”');
                                result.push('ã…£');
                                break;
                            default:
                                result.push(jung);
                                break;
                        }
                    }

                    // ì¢…ì„± ì¶”ê°€
                    if (jongSeong[jongIndex]) {
                        result.push(jongSeong[jongIndex]);
                    }

                    return result;
                }

                return null;
            }

            updateKeyboardHighlight() {
                // ëª¨ë“  í‚¤ ê°•ì¡° ì œê±°
                document.querySelectorAll('.key').forEach(key => {
                    key.classList.remove('active');
                });

                // ë‹¨ì–´/ë¬¸ì¥ ëª¨ë“œì—ì„œëŠ” ìëª¨ ì‹œí€€ìŠ¤ ê¸°ë°˜ ê°•ì¡°
                if (this.currentMode === 'word' || this.currentMode === 'sentence') {
                    // ì…ë ¥ê°’ ê¸°ë°˜ìœ¼ë¡œ ìëª¨ ìœ„ì¹˜ ê³„ì‚°
                    const inputValue = document.getElementById('typingInput').value;
                    let inputJamoCount = 0;

                    for (let i = 0; i < inputValue.length; i++) {
                        const char = inputValue[i];
                        if (char === ' ') {
                            inputJamoCount += 1;
                        } else {
                            const decomposed = this.decomposeHangul(char);
                            if (decomposed && decomposed.length > 0) {
                                inputJamoCount += decomposed.length;
                            } else {
                                inputJamoCount += 1;
                            }
                        }
                    }

                    if (inputJamoCount < this.currentJamoSequence.length) {
                        const currentJamo = this.currentJamoSequence[inputJamoCount];

                        // ìŠ¤í˜ì´ìŠ¤ë°” ì²˜ë¦¬
                        if (currentJamo === ' ') {
                            const targetKey = document.querySelector(`[data-key=" "]`);
                            if (targetKey) {
                                targetKey.classList.add('active');
                            }
                        }
                        // ë³µí•©ëª¨ìŒì¸ ê²½ìš° ë‘ í‚¤ ëª¨ë‘ ê°•ì¡° (ã…’, ã…– ì œì™¸)
                        else if (this.complexVowelMap[currentJamo]) {
                            const keys = this.complexVowelMap[currentJamo];
                            keys.forEach(keyName => {
                                const targetKey = document.querySelector(`[data-key="${keyName}"]`);
                                if (targetKey) {
                                    targetKey.classList.add('active');
                                }
                            });
                        } else {
                            // ì¼ë°˜ ìëª¨ì¸ ê²½ìš° ë‹¨ì¼ í‚¤ ê°•ì¡° (ã…’ëŠ” ã…í‚¤ë§Œ, ã…–ëŠ” ã…”í‚¤ë§Œ)
                            const keyName = this.keyboardMap[currentJamo];
                            if (keyName) {
                                const targetKey = document.querySelector(`[data-key="${keyName}"]`);
                                if (targetKey) {
                                    targetKey.classList.add('active');
                                }
                            }
                        }
                    }
                } else {
                    // ììŒ/ëª¨ìŒ ëª¨ë“œ
                    if (this.currentPosition < this.currentText.length) {
                        const currentChar = this.currentText[this.currentPosition];

                        // ìŠ¤í˜ì´ìŠ¤ë°” ì²˜ë¦¬
                        if (currentChar === ' ') {
                            const targetKey = document.querySelector(`[data-key=" "]`);
                            if (targetKey) {
                                targetKey.classList.add('active');
                            }
                        }
                        // ë³µí•©ëª¨ìŒì¸ ê²½ìš° ë‘ í‚¤ ëª¨ë‘ ê°•ì¡° (ã…’, ã…– ì œì™¸)
                        else if (this.complexVowelMap[currentChar]) {
                            const keys = this.complexVowelMap[currentChar];
                            keys.forEach(keyName => {
                                const targetKey = document.querySelector(`[data-key="${keyName}"]`);
                                if (targetKey) {
                                    targetKey.classList.add('active');
                                }
                            });
                        } else {
                            // ì¼ë°˜ ìëª¨ì¸ ê²½ìš° ë‹¨ì¼ í‚¤ ê°•ì¡° (ã…’ëŠ” ã…í‚¤ë§Œ, ã…–ëŠ” ã…”í‚¤ë§Œ)
                            const keyName = this.keyboardMap[currentChar];
                            if (keyName) {
                                const targetKey = document.querySelector(`[data-key="${keyName}"]`);
                                if (targetKey) {
                                    targetKey.classList.add('active');
                                }
                            }
                        }
                    }
                }
            }

            applyInitialColors() {
                const chars = document.querySelectorAll('.char');
                chars.forEach(char => {
                    char.style.color = '#8b5cf6';
                    char.style.background = 'none';
                    char.style.padding = '0';
                    char.style.borderRadius = '0';
                    char.style.boxShadow = 'none';
                    char.style.transform = 'none';
                });
            }

            handleInput(inputValue) {
                try {
                    if (!this.startTime) {
                        this.startTime = Date.now();
                    }

                    if (this.currentMode === 'sentence') {
                        const chars = document.querySelectorAll('.char');
                        this.correctJaso = 0;
                        this.totalJaso = this.countJaso(inputValue);

                        for (let i = 0; i < this.currentText.length; i++) {
                            const char = chars[i];
                            if (!char) continue;

                            char.style.background = 'none';
                            char.style.padding = '0';
                            char.style.borderRadius = '0';
                            char.style.boxShadow = 'none';
                            char.style.transform = 'none';

                            if (i < inputValue.length) {
                                if (inputValue[i] === this.currentText[i]) {
                                    char.style.color = '#000000';
                                    this.correctJaso += this.countJaso(this.currentText[i]);
                                } else {
                                    char.style.color = '#ff4444';
                                }
                            } else if (i === inputValue.length) {
                                char.style.color = '#3b82f6';
                            } else {
                                char.style.color = '#8b5cf6';
                            }
                        }
                    } else {
                        const chars = document.querySelectorAll('.char');
                        this.correctJaso = 0;
                        this.totalJaso = this.countJaso(inputValue);

                        for (let i = 0; i < this.currentText.length; i++) {
                            const char = chars[i];

                            if (i < inputValue.length) {
                                if (inputValue[i] === this.currentText[i]) {
                                    char.className = 'char correct';
                                    this.correctJaso += this.countJaso(this.currentText[i]);
                                } else {
                                    char.className = 'char incorrect';
                                }
                            } else {
                                char.className = 'char';
                                if (i === inputValue.length) {
                                    char.classList.add('current');
                                }
                            }
                        }
                    }

                    this.currentPosition = inputValue.length;
                    this.updateStats();
                    this.updateKeyboardHighlight();

                    if (inputValue === this.currentText) {
                        this.showNextButton();
                    }
                } catch (error) {
                    document.getElementById('accuracy').textContent = '100%';
                    document.getElementById('speed').textContent = '0';
                }
            }

            updateStats() {
                try {
                    const accuracy = this.totalJaso > 0 ? Math.round((this.correctJaso / this.totalJaso) * 100) : 100;
                    document.getElementById('accuracy').textContent = `${accuracy}%`;

                    if (this.startTime) {
                        const elapsed = (Date.now() - this.startTime) / 1000;
                        const cpm = elapsed > 0 ? Math.round((this.totalJaso / elapsed) * 60) : 0;
                        document.getElementById('speed').textContent = cpm;
                    } else {
                        document.getElementById('speed').textContent = '0';
                    }
                } catch (error) {
                    document.getElementById('accuracy').textContent = '100%';
                    document.getElementById('speed').textContent = '0';
                }
            }

            showNextButton() {
                try {
                    const accuracy = this.totalJaso > 0 ? Math.round((this.correctJaso / this.totalJaso) * 100) : 100;
                    const elapsed = this.startTime ? (Date.now() - this.startTime) / 1000 : 0;
                    const cpm = elapsed > 0 ? Math.round((this.totalJaso / elapsed) * 60) : 0;

                    this.sessionSpeeds.push(cpm);
                    this.sessionAccuracies.push(accuracy);
                } catch (error) {
                    // ì˜¤ë¥˜ ì‹œ ê¸°ë³¸ ìƒíƒœ ìœ ì§€
                }
            }

            nextProblem() {
                try {
                    this.currentProblem++;
                    if (this.currentProblem >= this.totalProblems) {
                        this.showComplete();
                    } else {
                        this.generateText();
                        this.updateDisplay();
                        document.getElementById('typingInput').value = '';
                        document.getElementById('typingInput').focus();
                    }
                } catch (error) {
                    // ë‹¤ìŒ ë¬¸ì œë¡œ ì´ë™ ì˜¤ë¥˜ ì‹œ ê¸°ë³¸ ìƒíƒœ ìœ ì§€
                }
            }

            showComplete() {
                try {
                    const avgAccuracy = this.sessionAccuracies.length > 0 ? 
                        Math.round(this.sessionAccuracies.reduce((a, b) => a + b, 0) / this.sessionAccuracies.length) : 100;
                    const avgSpeed = this.sessionSpeeds.length > 0 ? 
                        Math.round(this.sessionSpeeds.reduce((a, b) => a + b, 0) / this.sessionSpeeds.length) : 0;

                    document.getElementById('finalAccuracy').textContent = `${avgAccuracy}%`;
                    document.getElementById('finalSpeed').textContent = avgSpeed;
                    document.getElementById('completeModal').style.display = 'flex';
                } catch (error) {
                    // ì™„ë£Œ ëª¨ë‹¬ í‘œì‹œ ì˜¤ë¥˜ ì‹œ ê¸°ë³¸ ìƒíƒœ ìœ ì§€
                }
            }

            restart() {
                try {
                    this.currentProblem = 0;
                    this.sessionSpeeds = [];
                    this.sessionAccuracies = [];
                    this.resetStats();
                    this.generateText();
                    this.updateDisplay();
                    document.getElementById('typingInput').value = '';
                    document.getElementById('completeModal').style.display = 'none';
                    document.getElementById('typingInput').focus();
                } catch (error) {
                    // ì¬ì‹œì‘ ì˜¤ë¥˜ ì‹œ ê¸°ë³¸ ìƒíƒœ ìœ ì§€
                }
            }

            resetStats() {
                try {
                    this.currentPosition = 0;
                    this.startTime = null;
                    this.totalJaso = 0;
                    this.correctJaso = 0;
                    document.getElementById('accuracy').textContent = '100%';
                    document.getElementById('speed').textContent = '0';
                    document.getElementById('progress').textContent = `1/${this.totalProblems}`;
                } catch (error) {
                    // í†µê³„ ì´ˆê¸°í™” ì˜¤ë¥˜ ì‹œ ê¸°ë³¸ ìƒíƒœ ìœ ì§€
                }
            }
        }

        // ë“œë¡­ë‹¤ìš´ì—ì„œ ëª¨ë“œ ì „í™˜ í•¨ìˆ˜
        function switchMode(mode) {
            if (window.typingPractice) {
                window.typingPractice.changeMode(mode);
            }
        }

        // ì˜ì–´ íƒ€ìì—°ìŠµ ëª¨ë“œ ì „í™˜ í•¨ìˆ˜
        function switchEnglishMode(mode) {
            const modeNames = {
                'alphabet': 'ì•ŒíŒŒë²³',
                'word': 'ë‹¨ì–´',
                'sentence': 'ë¬¸ì¥'
            };
            alert(`ì˜ì–´ ${modeNames[mode]}ì—°ìŠµì„ ì‹œì‘í•©ë‹ˆë‹¤!\n\nì¶”í›„ ì˜ì–´ íƒ€ìì—°ìŠµ í˜ì´ì§€ì—ì„œ êµ¬í˜„ë  ì˜ˆì •ì…ë‹ˆë‹¤.`);
        }

        // íƒ€ìê²Œì„ í•¨ìˆ˜ë“¤
        function playKoreanMoleGame() {
            alert('í•œê¸€ ë‘ë”ì§€ ì¡ê¸° ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤! ğŸ¹\n\nì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” í•œê¸€ ê²Œì„ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
        }

        function playEnglishMoleGame() {
            alert('ì˜ì–´ ë‘ë”ì§€ ì¡ê¸° ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤! ğŸ¯\n\nì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì˜ì–´ ê²Œì„ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
        }

        function playKoreanPlaneGame() {
            alert('í•œê¸€ ë¹„í–‰ê¸° ì¡°ì¢… ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤! âœˆï¸\n\nì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” í•œê¸€ ë¹„í–‰ê¸° ê²Œì„ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
        }

        function playEnglishPlaneGame() {
            alert('ì˜ì–´ ë¹„í–‰ê¸° ì¡°ì¢… ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤! ğŸ›©ï¸\n\nì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì˜ì–´ ë¹„í–‰ê¸° ê²Œì„ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
        }

        function playKoreanDeliveryGame() {
            alert('í•œê¸€ íƒë°° ë¶„ë¥˜ ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤! ğŸ“¦\n\nì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” í•œê¸€ íƒë°° ê²Œì„ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
        }

        function playEnglishDeliveryGame() {
            alert('ì˜ì–´ íƒë°° ë¶„ë¥˜ ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤! ğŸ“®\n\nì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì˜ì–´ íƒë°° ê²Œì„ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            try {
                window.typingPractice = new KoreanTypingPractice();
            } catch (error) {
                // ì´ˆê¸°í™” ì˜¤ë¥˜ ì‹œ ê¸°ë³¸ ìƒíƒœ ìœ ì§€
            }
        });

        // ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤í¬ë¡¤ íš¨ê³¼
        window.addEventListener('scroll', () => {
            const nav = document.querySelector('nav');
            if (window.scrollY > 100) {
                nav.style.background = 'rgba(255, 255, 255, 0.98)';
            } else {
                nav.style.background = 'rgba(255, 255, 255, 0.95)';
            }
        });

        // ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ë§
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const href = this.getAttribute('href');
                if (href && href !== '#') {
                    e.preventDefault();
                    const target = document.querySelector(href);
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                }
            });
        });
    </script>
</body>
</html>