<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>핑거런 | 압도적인 디자인과 성능의 타자연습을 경험해보세요.</title>
<link rel="icon" type="image/svg+xml" href="../images/finger-run-logo.svg">
    
    <!-- SEO 메타태그 -->
    <meta name="description" content="영어 택배 이름을 정확하게 타이핑해서 택배를 올바르게 분류하는 영어 타자게임. 영어타자연습 속도와 정확성 훈련!">
    <meta name="keywords" content="타자게임, 영어타자게임, English delivery game, 물류 시뮬레이션, English Typing game, 온라인 영어타자, 택배게임, English typing game">
    <meta name="author" content="FingerRun">
    <meta name="robots" content="index, follow">

    <!-- Open Graph (SNS 공유) -->
    <meta property="og:title" content="영어 택배 분류 게임 | 핑거런">
    <meta property="og:description" content="영어 택배 이름을 정확하게 타이핑해서 택배를 올바르게 분류하는 영어 타자게임!">
    <meta property="og:url" content="https://fingerrun.com/English/game-delivery.html">
    <meta property="og:type" content="website">

    <!-- 추가 SEO -->
    <link rel="canonical" href="https://fingerrun.com/English/game-delivery.html">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Navigation - 한글 버전과 동일 */
        nav {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: #667eea;
            text-decoration: none;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 1.5rem;
            flex-wrap: nowrap;
            white-space: nowrap;
        }

        .nav-menu li {
            position: relative;
        }

        .nav-menu a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            padding: 0.5rem 0.8rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .nav-menu a:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .dropdown-arrow {
            font-size: 0.7rem;
            transition: transform 0.3s ease;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-radius: 10px;
            padding: 0.5rem 0;
            min-width: 180px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1001;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .nav-menu li:hover .dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .nav-menu li:hover .dropdown-arrow {
            transform: rotate(180deg);
        }

        .dropdown-menu a {
            display: block;
            padding: 0.7rem 1rem;
            color: #333;
            border-radius: 0;
            font-weight: 400;
            transition: all 0.2s ease;
        }

        .dropdown-menu a:hover {
            background: #f8f9fa;
            color: #667eea;
            transform: none;
            padding-left: 1.2rem;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        /* Main Content */
        .main-content {
            margin-top: 80px;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .game-container {
            width: 90%;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .game-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .game-title {
            font-size: 28px;
            font-weight: bold;
            color: #1e3a8a;
            margin-bottom: 10px;
        }

        .game-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 0 10px;
        }

        .stat-item {
            text-align: center;
            padding: 15px 10px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border-radius: 15px;
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
            min-width: 80px;
            flex: 1;
            margin: 0 5px;
        }

        .stat-value {
            font-size: 24px;
            display: block;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.9;
        }

        .conveyor-belt {
            width: 100%;
            height: 120px;
            background: linear-gradient(180deg, #4b5563 0%, #374151 50%, #1f2937 100%);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.3);
            margin-bottom: 20px;
        }

        .conveyor-belt::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                90deg,
                transparent,
                transparent 10px,
                rgba(255, 255, 255, 0.1) 10px,
                rgba(255, 255, 255, 0.1) 20px
            );
            animation: conveyor-move 2s linear infinite;
        }

        @keyframes conveyor-move {
            from { transform: translateX(0); }
            to { transform: translateX(-20px); }
        }

        .package {
            position: absolute;
            top: 20px;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            color: white;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            text-align: center;
            transition: transform 0.3s ease;
            cursor: pointer;
            animation: package-move 8s linear infinite;
            font-family: 'Courier New', monospace;
            padding: 5px;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .package:hover {
            transform: scale(1.05);
        }

        .package::before {
            content: '';
            position: absolute;
            top: -5px;
            left: 20px;
            right: 20px;
            height: 3px;
            background: #92400e;
            border-radius: 2px;
        }

        .package::after {
            content: '';
            position: absolute;
            top: 20px;
            bottom: 20px;
            left: -5px;
            width: 3px;
            background: #92400e;
            border-radius: 2px;
        }

        @keyframes package-move {
            from {
                right: -100px;
                transform: translateY(0);
            }
            to {
                right: 100%;
                transform: translateY(0);
            }
        }

        .package-falling {
            animation: package-fall 1s ease-in forwards !important;
        }

        @keyframes package-fall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(200px) rotate(180deg);
                opacity: 0;
            }
        }

        .input-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .word-input {
            flex: 1;
            padding: 20px;
            border: 2px solid #e5e7eb;
            border-radius: 15px;
            font-size: 18px;
            font-weight: 500;
            outline: none;
            transition: all 0.3s ease;
            background: white;
            font-family: 'Courier New', monospace;
        }

        .word-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .submit-btn {
            padding: 20px 30px;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        .game-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .control-btn {
            padding: 15px 25px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .start-btn {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .reset-btn {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        }

        .control-btn:hover {
            transform: translateY(-2px);
        }

        .game-over-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .modal-title {
            font-size: 32px;
            font-weight: bold;
            color: #ef4444;
            margin-bottom: 20px;
        }

        .modal-score {
            font-size: 24px;
            color: #374151;
            margin-bottom: 30px;
        }

        .modal-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }

        .modal-btn.restart-btn {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .modal-btn.restart-btn:hover {
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }

        .modal-btn.exit-btn {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        .modal-btn.exit-btn:hover {
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
        }

        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .queue-warning {
            background: linear-gradient(135deg, #ef4444, #dc2626) !important;
            animation: warning-pulse 1s infinite;
        }

        @keyframes warning-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-menu {
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .nav-menu a {
                padding: 0.4rem 0.6rem;
                font-size: 0.8rem;
            }

            .dropdown-menu {
                min-width: 150px;
                font-size: 0.8rem;
            }

            .dropdown-menu a {
                padding: 0.5rem 0.8rem;
            }

            .game-container {
                width: 95%;
                padding: 15px;
            }

            .game-stats {
                flex-direction: column;
                gap: 10px;
            }

            .stat-item {
                padding: 10px;
            }

            .input-container {
                flex-direction: column;
            }

            .package {
                font-size: 14px;
                padding: 3px;
            }
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="../index.html" class="logo">⌨️ FingerRun</a>
            <ul class="nav-menu">
                <li><a href="../index.html">소개</a></li>
                <li>
                    <a href="#korean">
                        한글 타자연습
                        <span class="dropdown-arrow">▼</span>
                    </a>
                    <div class="dropdown-menu">
                        <a href="../Korean/practice.html">자음 연습</a>
                        <a href="../Korean/practice.html">모음 연습</a>
                        <a href="../Korean/practice.html">단어 연습</a>
                        <a href="../Korean/practice.html">문장 연습</a>
                    </div>
                </li>
                <li>
                    <a href="#english">
                        영어 타자연습
                        <span class="dropdown-arrow">▼</span>
                    </a>
                    <div class="dropdown-menu">
                        <a href="practice.html">알파벳 연습</a>
                        <a href="practice.html">영어 단어 연습</a>
                        <a href="practice.html">영어 문장 연습</a>
                    </div>
                </li>
                <li>
                    <a href="#games">
                        타자게임
                        <span class="dropdown-arrow">▼</span>
                    </a>
                    <div class="dropdown-menu">
                        <a href="../Korean/game-mole.html">두더지 잡기 (한글)</a>
                        <a href="game-mole.html">두더지 잡기 (영어)</a>
                        <a href="../Korean/game-plane.html">비행기 조종 (한글)</a>
                        <a href="game-plane.html">비행기 조종 (영어)</a>
                        <a href="../Korean/game-delivery.html">택배 분류 (한글)</a>
                        <a href="game-delivery.html">택배 분류 (영어)</a>
                    </div>
                </li>
                <li>
                    <a href="#certificate">
                        자격증
                        <span class="dropdown-arrow">▼</span>
                    </a>
                    <div class="dropdown-menu">
                        <a href="../Certificate/word-processor.html">워드프로세서</a>
                    </div>
                </li>
                <li><a href="../contact.html">문의하기</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <div class="game-container">
            <div class="game-header">
                <h1 class="game-title">📦 Package Typing Game</h1>
                <p>Process packages on the conveyor belt!</p>
            </div>

            <div class="game-stats">
                <div class="stat-item">
                    <span class="stat-value" id="missed">0</span>
                    <span class="stat-label">Missed</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="level">1</span>
                    <span class="stat-label">Level (1-10)</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="timer">60</span>
                    <span class="stat-label">Time Left</span>
                </div>
            </div>

            <div class="conveyor-belt" id="conveyor">
                <!-- Packages will be dynamically created here -->
            </div>

            <div class="input-container">
                <input type="text" class="word-input" id="wordInput" 
                       placeholder="Type the English word on the package... (Press Space to submit)" disabled>
                <button class="submit-btn" id="submitBtn" onclick="checkWord()">Submit</button>
            </div>

            <div class="game-controls">
                <button class="control-btn start-btn" onclick="startGame()">Start Game</button>
                <button class="control-btn reset-btn" onclick="resetGame()">Reset Game</button>
            </div>
        </div>
    </div>

    <div class="game-over-modal" id="gameOverModal">
        <div class="modal-content">
            <h2 class="modal-title">GAME OVER</h2>
            <p class="modal-score">Reached Level: <span id="finalLevel">1</span></p>
            <div class="modal-buttons">
                <button class="modal-btn restart-btn" onclick="shareResult()">Try Again</button>
                <button class="modal-btn exit-btn" onclick="exitGame()">Exit</button>
            </div>
        </div>
    </div>

    <script>
        // Game state
        var gameState = {
            isPlaying: false,
            queue: 0,
            level: 1,
            maxLevel: 10,
            packages: [],
            packageId: 0,
            spawnInterval: null,
            gameSpeed: 8000,
            isGameCompleted: false,
            processedPackages: 0,
            totalMissedPackages: 0,
            usedWords: new Set(),
            levelStartTime: 0,
            levelTimer: null,
            levelDuration: 60000,
            isGameOver: false
        };

        // Word arrays
        var beginnerWords = [
            'cat', 'dog', 'car', 'run', 'big', 'fun', 'sun', 'hat', 'bat', 'bag',
            'cup', 'pen', 'box', 'toy', 'map', 'egg', 'red', 'blue', 'tree', 'book',
            'fish', 'bird', 'cake', 'ball', 'duck', 'frog', 'moon', 'star', 'door', 'hand',
            'foot', 'head', 'nose', 'eyes', 'love', 'home', 'play', 'work', 'time', 'good',
            'rain', 'snow', 'wind', 'fire', 'lake', 'hill', 'park', 'road', 'boat', 'game'
        ];

        var easyWords = [
            'house', 'water', 'friend', 'school', 'happy', 'music', 'paper', 'phone', 'table', 'chair',
            'green', 'white', 'black', 'money', 'light', 'sound', 'world', 'think', 'learn', 'write',
            'clean', 'beach', 'ocean', 'smile', 'heart', 'brain', 'sweet', 'fresh', 'quick', 'smart',
            'dance', 'laugh', 'dream', 'magic', 'piano', 'radio', 'train', 'plane', 'flower', 'garden',
            'winter', 'summer', 'spring', 'autumn', 'season', 'jungle', 'forest', 'desert'
        ];

        var mediumWords = [
            'beautiful', 'important', 'computer', 'keyboard', 'language', 'surprise', 'together', 'mountain',
            'remember', 'breakfast', 'birthday', 'question', 'children', 'vacation', 'elephant', 'sandwich',
            'hospital', 'business', 'problem', 'picture', 'service', 'parking', 'weather', 'library',
            'teacher', 'student', 'science', 'history', 'kitchen', 'bedroom', 'journey', 'freedom',
            'culture', 'nature', 'project', 'meeting', 'package', 'perfect', 'machine', 'network',
            'brother', 'sister'
        ];

        var hardWords = [
            'education', 'technology', 'psychology', 'philosophy', 'restaurant', 'government', 'environment',
            'opportunity', 'organization', 'relationship', 'championship', 'photography', 'university',
            'development', 'responsibility', 'communication', 'construction', 'information', 'international',
            'entertainment', 'neighborhood', 'understanding', 'appreciation', 'comfortable', 'temperature',
            'celebration', 'competition', 'contribution', 'consequence', 'achievement', 'explanation',
            'investigation', 'demonstration', 'preparation', 'presentation'
        ];

        var expertWords = [
            'extraordinary', 'pronunciation', 'massachusetts', 'incomprehensible', 'responsibilities',
            'characteristics', 'acknowledgment', 'embarrassment', 'pharmaceutical', 'entrepreneurship',
            'architecture', 'archaeological', 'chronological', 'electromagnetic', 'meteorological',
            'cardiovascular', 'gastrointestinal', 'ophthalmologist', 'neuropsychology', 'biotechnology',
            'nanotechnology', 'cryptocurrency', 'biochemistry', 'astrophysics', 'thermodynamics',
            'photosynthesis', 'metamorphosis', 'anthropomorphic'
        ];

        // Main game functions
        function startGame() {
            if (gameState.isPlaying) return;
            
            gameState.isPlaying = true;
            gameState.levelStartTime = Date.now();
            document.getElementById('wordInput').disabled = false;
            document.getElementById('wordInput').focus();
            document.getElementById('timer').textContent = '60';
            
            createPackage();
            gameState.spawnInterval = setInterval(createPackage, 3500 - gameState.level * 200);
            gameState.levelTimer = setInterval(updateTimer, 100);
        }

        function resetGame() {
            gameState.isPlaying = false;
            gameState.queue = 0;
            gameState.level = 1;
            gameState.packages = [];
            gameState.packageId = 0;
            gameState.gameSpeed = 8000;
            gameState.isGameCompleted = false;
            gameState.processedPackages = 0;
            gameState.totalMissedPackages = 0;
            gameState.usedWords = new Set();
            gameState.levelStartTime = 0;
            gameState.isGameOver = false;

            if (gameState.spawnInterval) {
                clearInterval(gameState.spawnInterval);
                gameState.spawnInterval = null;
            }
            if (gameState.levelTimer) {
                clearInterval(gameState.levelTimer);
                gameState.levelTimer = null;
            }

            document.getElementById('missed').textContent = '0';
            document.getElementById('level').textContent = '1';
            document.getElementById('timer').textContent = '60';
            document.getElementById('wordInput').value = '';
            document.getElementById('wordInput').disabled = true;
            document.getElementById('conveyor').innerHTML = '';

            var missedElement = document.getElementById('missed').parentElement;
            if (missedElement) {
                missedElement.classList.remove('queue-warning');
            }
        }

        function checkWord() {
            if (!gameState.isPlaying) return;

            var input = document.getElementById('wordInput');
            var inputWord = input.value.trim();
            
            if (inputWord === '') return;

            var targetPackage = gameState.packages[0];
            if (targetPackage && targetPackage.word === inputWord) {
                targetPackage.element.classList.add('package-falling');
                setTimeout(function() {
                    removePackage(targetPackage.id);
                }, 1000);
            }

            input.value = '';
        }

        function getRandomWord() {
            var wordArray;
            if (gameState.level <= 2) {
                wordArray = beginnerWords;
            } else if (gameState.level <= 4) {
                wordArray = easyWords;
            } else if (gameState.level <= 6) {
                wordArray = mediumWords;
            } else if (gameState.level <= 8) {
                wordArray = hardWords;
            } else {
                wordArray = expertWords;
            }

            var availableWords = wordArray.filter(function(word) {
                return !gameState.usedWords.has(word);
            });

            if (availableWords.length === 0) {
                gameState.usedWords.clear();
                return wordArray[Math.floor(Math.random() * wordArray.length)];
            }

            var selectedWord = availableWords[Math.floor(Math.random() * availableWords.length)];
            gameState.usedWords.add(selectedWord);
            return selectedWord;
        }

        function createPackage() {
            var word = getRandomWord();
            var package = {
                id: gameState.packageId++,
                word: word,
                element: null
            };

            var packageElement = document.createElement('div');
            packageElement.className = 'package';
            packageElement.textContent = word;
            packageElement.style.animationDuration = gameState.gameSpeed + 'ms';
            packageElement.id = 'package-' + package.id;

            if (word.length > 15) {
                packageElement.style.fontSize = '12px';
            } else if (word.length > 10) {
                packageElement.style.fontSize = '14px';
            } else if (word.length > 6) {
                packageElement.style.fontSize = '16px';
            } else {
                packageElement.style.fontSize = '18px';
            }

            document.getElementById('conveyor').appendChild(packageElement);
            package.element = packageElement;
            gameState.packages.push(package);
            updateQueue();

            setTimeout(function() {
                if (package.element && package.element.parentNode && gameState.isPlaying) {
                    removePackage(package.id);
                    gameState.processedPackages++;
                    gameState.totalMissedPackages++;
                    updateQueue();
                    
                    if (gameState.totalMissedPackages >= 3) {
                        gameOver();
                    }
                }
            }, gameState.gameSpeed);
        }

        function removePackage(packageId) {
            var packageIndex = gameState.packages.findIndex(function(p) {
                return p.id === packageId;
            });

            if (packageIndex !== -1) {
                var package = gameState.packages[packageIndex];
                if (package.element && package.element.parentNode) {
                    package.element.parentNode.removeChild(package.element);
                }
                gameState.packages.splice(packageIndex, 1);
                updateQueue();
            }
        }

        function updateQueue() {
            gameState.queue = gameState.packages.length;
            document.getElementById('missed').textContent = gameState.totalMissedPackages;

            var queueElement = document.getElementById('missed').parentElement;
            if (gameState.queue >= 2) {
                queueElement.classList.add('queue-warning');
            } else {
                queueElement.classList.remove('queue-warning');
            }
        }

        function updateTimer() {
            if (!gameState.isPlaying) return;

            var currentTime = Date.now();
            var elapsedTime = currentTime - gameState.levelStartTime;
            var remainingTime = Math.max(0, gameState.levelDuration - elapsedTime);
            var seconds = Math.ceil(remainingTime / 1000);

            document.getElementById('timer').textContent = seconds;

            if (remainingTime <= 0) {
                checkLevelCompletion();
            }
        }

        function checkLevelCompletion() {
            var currentTime = Date.now();
            var elapsedTime = currentTime - gameState.levelStartTime;

            if (elapsedTime >= gameState.levelDuration) {
                if (gameState.totalMissedPackages < 3) {
                    levelComplete();
                } else {
                    gameOver();
                }
            }
        }

        function levelComplete() {
            gameState.isPlaying = false;
            gameState.isGameOver = false;

            if (gameState.spawnInterval) {
                clearInterval(gameState.spawnInterval);
                gameState.spawnInterval = null;
            }
            if (gameState.levelTimer) {
                clearInterval(gameState.levelTimer);
                gameState.levelTimer = null;
            }

            document.getElementById('wordInput').disabled = true;

            var modal = document.getElementById('gameOverModal');
            var title = modal.querySelector('.modal-title');
            var scoreText = modal.querySelector('.modal-score');
            var restartBtn = modal.querySelector('.restart-btn');
            var exitBtn = modal.querySelector('.exit-btn');

            if (gameState.level >= gameState.maxLevel) {
                title.textContent = '🎉 COMPLETE!';
                title.style.color = '#10b981';
                scoreText.innerHTML = 'All levels completed!';
                restartBtn.textContent = 'Play Again';
                exitBtn.textContent = 'Exit';
                gameState.isGameCompleted = true;
            } else {
                title.textContent = '🎉 LEVEL COMPLETE!';
                title.style.color = '#10b981';
                scoreText.innerHTML = 'Level ' + gameState.level + ' cleared!<br>Total missed packages: ' + gameState.totalMissedPackages + '/3';
                restartBtn.textContent = 'Next Level';
                exitBtn.textContent = 'Exit Game';
                gameState.isGameCompleted = false;
            }

            modal.style.display = 'flex';
        }

        function levelUp() {
            gameState.level++;
            gameState.usedWords.clear();
            gameState.processedPackages = 0;
            gameState.levelStartTime = Date.now();

            document.getElementById('level').textContent = gameState.level;
            document.getElementById('timer').textContent = '60';

            gameState.gameSpeed = Math.max(3000, gameState.gameSpeed - 500);

            document.getElementById('conveyor').innerHTML = '';
            gameState.packages = [];
            updateQueue();

            closeModal();

            gameState.isPlaying = true;
            document.getElementById('wordInput').disabled = false;
            document.getElementById('wordInput').focus();

            createPackage();
            gameState.spawnInterval = setInterval(createPackage, Math.max(1500, 3500 - gameState.level * 200));
            gameState.levelTimer = setInterval(updateTimer, 100);
        }

        function shareResult() {
            if (gameState.isGameCompleted) {
                closeModal();
                resetGame();
            } else if (gameState.isGameOver) {
                closeModal();
                resetGame();
            } else {
                levelUp();
            }
        }

        function gameOver() {
            gameState.isPlaying = false;
            gameState.isGameOver = true;

            if (gameState.spawnInterval) {
                clearInterval(gameState.spawnInterval);
                gameState.spawnInterval = null;
            }
            if (gameState.levelTimer) {
                clearInterval(gameState.levelTimer);
                gameState.levelTimer = null;
            }

            document.getElementById('wordInput').disabled = true;

            var modal = document.getElementById('gameOverModal');
            var title = modal.querySelector('.modal-title');
            var scoreText = modal.querySelector('.modal-score');
            var restartBtn = modal.querySelector('.restart-btn');
            var exitBtn = modal.querySelector('.exit-btn');
            var finalLevel = document.getElementById('finalLevel');

            title.textContent = 'GAME OVER';
            title.style.color = '#ef4444';
            scoreText.innerHTML = 'Reached Level: ' + gameState.level;

            if (finalLevel) {
                finalLevel.textContent = gameState.level;
            }

            restartBtn.textContent = 'Try Again';
            exitBtn.textContent = 'Exit';
            gameState.isGameCompleted = false;

            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('gameOverModal').style.display = 'none';
        }

        function exitGame() {
            closeModal();
            resetGame();
        }

        // 네비게이션 함수들
        function switchKoreanMode(mode) {
            var modeNames = {
                'consonant': '자음',
                'vowel': '모음',
                'word': '단어',
                'sentence': '문장'
            };
            alert('한글 ' + modeNames[mode] + ' 연습을 시작합니다!');
        }

        function switchEnglishMode(mode) {
            var modeNames = {
                'alphabet': '알파벳',
                'word': '단어',
                'sentence': '문장'
            };
            alert('영어 ' + modeNames[mode] + ' 연습을 시작합니다!');
        }

        function playKoreanMoleGame() {
            alert('한글 두더지 잡기 게임을 시작합니다!');
        }

        function playEnglishMoleGame() {
            alert('영어 두더지 잡기 게임을 시작합니다!');
        }

        function playKoreanPlaneGame() {
            alert('한글 비행기 조종 게임을 시작합니다!');
        }

        function playEnglishPlaneGame() {
            alert('영어 비행기 조종 게임을 시작합니다!');
        }

        function playKoreanDeliveryGame() {
            alert('한글 택배 분류 게임을 시작합니다!');
        }

        function playEnglishDeliveryGame() {
            alert('영어 택배 분류 게임을 시작합니다!');
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Keyboard event handling
            document.getElementById('wordInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    checkWord();
                }
            });

            // Spacebar handling
            document.addEventListener('keydown', function(e) {
                if (e.code === 'Space' && gameState.isPlaying) {
                    e.preventDefault();
                    checkWord();
                }
            });

            // Initialize game
            resetGame();
        });

        // 네비게이션 스크롤 효과
        window.addEventListener('scroll', function() {
            var nav = document.querySelector('nav');
            if (window.scrollY > 100) {
                nav.style.background = 'rgba(255, 255, 255, 0.98)';
            } else {
                nav.style.background = 'rgba(255, 255, 255, 0.95)';
            }
        });

        // 부드러운 스크롤링
        document.querySelectorAll('a[href^="#"]').forEach(function(anchor) {
            anchor.addEventListener('click', function (e) {
                var href = this.getAttribute('href');
                if (href && href !== '#') {
                    e.preventDefault();
                    var target = document.querySelector(href);
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                }
            });
        });
    </script>
</body>
</html>